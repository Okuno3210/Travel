<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>åœ°å›³ã‹ã‚‰è¦³å…‰åœ°ã‚’æ¢ã™</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
	    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
		
		    /* åœ°å›³ã‚³ãƒ³ãƒ†ãƒŠã®é«˜ã•æŒ‡å®šã¯å¿…é ˆ */
		    #map { 
		        height: 600px; /* â˜…ã“ã“ãŒé‡è¦ã€‚é©åˆ‡ãªé«˜ã•ã‚’æŒ‡å®š */
		        width: 100%;  
		    }
		    body { font-family: sans-serif; text-align: center; }
		    h1 { margin-bottom: 5px; }
		</style>
   
</head>



<body>
    <h1>ğŸŒ åœ°å›³ã‹ã‚‰è¦³å…‰åœ°ã‚’æ¢ã™</h1>
    <p>ãƒ”ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¦³å…‰åœ°æƒ…å ±ã‚’ãƒã‚§ãƒƒã‚¯ï¼</p>
    
    <div id="map"></div>

	<script>
	    // ----------------------------------------------------
	    // â˜… ä¿®æ­£ç‚¹1: åœ°å›³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ– (å¿…é ˆ)
	    // ID 'map' ã‚’å‚ç…§ã—ã€åœ°å›³ã®ä¸­å¿ƒã¨åˆæœŸã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã‚’è¨­å®š
	    var map = L.map('map').setView([15, 0], 2); 
	    // ----------------------------------------------------

	    // ----------------------------------------------------
	    // â˜… ä¿®æ­£ç‚¹2: ã‚¿ã‚¤ãƒ«ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆèƒŒæ™¯åœ°å›³ï¼‰ã®è¿½åŠ  (å¿…é ˆ)
	    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	        maxZoom: 4
	    }).addTo(map);
	    // ----------------------------------------------------

	    // Spring Boot APIã‹ã‚‰è¦³å…‰åœ°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€ãƒãƒ¼ã‚«ãƒ¼ã‚’é…ç½®ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹
	    fetch('/api/locations') // â˜… ã“ã“ã§Controllerã®é™çš„ãƒªã‚¹ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹
	        .then(response => response.json())
	        .then(data => {
	            data.forEach(location => {
	                // Leafletã¯ [ç·¯åº¦, çµŒåº¦] ã®é †åºã§åº§æ¨™ã‚’å—ã‘å–ã‚Šã¾ã™
	                L.marker([location.latitude, location.longitude])
	                    .addTo(map)
	                    .bindPopup(
	                        `<b>${location.name}</b><br>` +
	                        `ç·¯åº¦: ${location.latitude}<br>` +
	                        `çµŒåº¦: ${location.longitude}<br>`+
							`ãƒ†ã‚¹ãƒˆ`
	                    );
	            });
	        })
	        .catch(error => console.error('è¦³å…‰åœ°ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚¨ãƒ©ãƒ¼:', error));
	</script>
</body>
</html>